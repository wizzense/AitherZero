{
  "name": "Session Management",
  "description": "Manages work sessions with context preservation for AI continuation",
  "version": "1.0.0",
  "author": "AitherZero",
  "tags": ["session", "context", "ai", "continuation"],
  
  "profiles": {
    "save": {
      "description": "Save current work context",
      "stages": ["save-context"]
    },
    "restore": {
      "description": "Generate continuation prompt from saved context",
      "stages": ["generate-prompt"]
    },
    "full": {
      "description": "Complete session management cycle",
      "stages": ["save-context", "generate-prompt", "create-issues"]
    },
    "ci": {
      "description": "CI/CD session management with automatic issue creation",
      "stages": ["save-context", "test-validation", "create-issues", "generate-prompt"]
    }
  },
  
  "stages": [
    {
      "name": "save-context",
      "description": "Save current work context",
      "scripts": ["0820"],
      "variables": {
        "IncludeHistory": true,
        "CompressContext": false
      },
      "continueOnError": false
    },
    {
      "name": "generate-prompt",
      "description": "Generate AI continuation prompt",
      "scripts": ["0821"],
      "variables": {
        "MaxTokens": 4000,
        "ShowPrompt": false
      },
      "continueOnError": false
    },
    {
      "name": "test-validation",
      "description": "Run tests and collect results for context",
      "scripts": ["0402", "0404"],
      "parallel": true,
      "continueOnError": true
    },
    {
      "name": "create-issues",
      "description": "Create GitHub issues from failures",
      "scripts": ["0810"],
      "variables": {
        "AutoCreate": "${CI:false}",
        "IssueType": "TestFailure"
      },
      "condition": "Test-Path './tests/results/*.json'",
      "continueOnError": true
    }
  ],
  
  "variables": {
    "OutputPath": "./.claude/session-context.json",
    "PromptPath": "./.claude/continuation-prompt.md"
  },
  
  "hooks": {
    "pre": {
      "script": "Write-Host 'Starting session management...' -ForegroundColor Cyan"
    },
    "post": {
      "script": "Write-Host 'Session management complete!' -ForegroundColor Green"
    },
    "onError": {
      "script": "Write-Warning 'Session management encountered errors. Check logs for details.'"
    }
  },
  
  "requirements": {
    "powershell": "7.0",
    "modules": [],
    "commands": ["git", "gh"]
  }
}