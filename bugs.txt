# AitherZero Bug Tracker
Last Updated: 2024-01-11

## ACTIVE BUGS

(No active bugs - all issues have been resolved)

## RECENTLY FIXED BUGS

### 1. Missing Test Dependencies  
**Status:** FIXED (2024-01-11)
**Severity:** HIGH
**Found:** Testing & Validation menu
**Error:** "Pester 5.0.0 or higher is required. Run 0400_Install-TestingTools.ps1 first"
**Files Affected:** 
- automation-scripts/0402_Run-UnitTests.ps1
- automation-scripts/0403_Run-IntegrationTests.ps1
**Description:** Unit and integration tests fail because Pester module is not installed

### 2. Missing PSScriptAnalyzer
**Status:** FIXED (2024-01-11)
**Severity:** HIGH  
**Found:** Testing & Validation menu
**Error:** "PSScriptAnalyzer is required. Run 0400_Install-TestingTools.ps1 first"
**Files Affected:**
- automation-scripts/0404_Run-PSScriptAnalyzer.ps1
**Description:** Code analysis fails because PSScriptAnalyzer module is not installed

### 3. Environment Validation Failures
**Status:** FIXED (2024-01-11)
**Severity:** MEDIUM
**Found:** Testing & Validation > Validate Environment
**Failures:**
- Node.js expected but not found
- Directory not found: C:/HyperV
- Directory not found: C:/iso_share  
- Directory not found: C:/Temp/base-infra
**Files Affected:**
- automation-scripts/0500_Validate-Environment.ps1
**Description:** Validation expects directories that may not exist on all systems

### 4. Log Viewer Exit Code Issue
**Status:** FIXED (2024-01-11)
**Severity:** LOW
**Found:** Reports & Logs menu (all log viewing options)
**Error:** Scripts report as failed despite completing successfully
**Files Affected:**
- automation-scripts/0530_View-Logs.ps1
**Description:** Log viewer returns non-zero exit code even when successful

### 5. OpenTofu Initialization Crash
**Status:** FIXED (2024-01-11)
**Severity:** CRITICAL
**Found:** Quick Setup execution
**Error:** "Fatal error in Start-AitherZero" with RemoteException
**Files Affected:**
- automation-scripts/0009_Initialize-OpenTofu.ps1 (line 152)
**Description:** OpenTofu initialization causes critical crash during Quick Setup

### 6. Module Reference Errors in Tests
**Status:** FIXED (2024-01-11)
**Severity:** MEDIUM
**Found:** Test files
**Issue:** Tests reference "aitherzero.psm1" instead of "AitherZero.psm1"
**Files Affected:**
- tests/domains/configuration/Configuration.Tests.ps1
- tests/domains/infrastructure/Infrastructure.Tests.ps1
- tests/domains/utilities/Logging.Tests.ps1
- tests/integration/Bootstrap-To-Infrastructure.Tests.ps1

### 7. Missing 0400_Install-TestingTools.ps1
**Status:** FIXED (2024-01-11)
**Severity:** HIGH
**Found:** Multiple test scripts reference this missing script
**Files Affected:**
- automation-scripts/0400_Install-TestingTools.ps1 (MISSING)
**Description:** Critical testing tools installer script is missing

### 8. Infrastructure Mock Errors
**Status:** FIXED (2024-01-11)  
**Severity:** MEDIUM
**Found:** Infrastructure.Tests.ps1
**Issue:** Incorrect Mock syntax - using "Mock &" instead of "Mock Invoke-Expression"
**Files Affected:**
- tests/domains/infrastructure/Infrastructure.Tests.ps1 (lines 84, 114, 129, 153, 170)

## FIXED BUGS (2024-01-11 Session)

### All UI Testing Bugs Fixed
**Fixed Date:** 2024-01-11
**Summary:** Fixed all 8 bugs discovered during UI testing session
**Changes Made:**
1. **OpenTofu Crash Fix:** Added proper command checking and error handling in 0009_Initialize-OpenTofu.ps1
2. **Testing Tools:** Removed admin requirement from 0400_Install-TestingTools.ps1
3. **Module References:** All test files now correctly reference AitherZero.psm1
4. **Infrastructure Mocks:** Fixed Mock syntax in Infrastructure.Tests.ps1
5. **Environment Validation:** Made validation conditional based on config, creates missing directories
6. **Log Viewer:** Fixed exit code to return 0 on success
7. **Test Integration:** Added bug fix validations to Bootstrap.Tests.ps1

### Bootstrap Dirty Environment Issues
**Status:** FIXED (2024-01-11)
**PR:** #591
**Description:** Bootstrap was failing on non-clean endpoints with CoreApp and other conflicting systems
**Solution:** Added aggressive environment cleaning at the start of bootstrap.ps1

---

## Testing Priority Order

1. **CRITICAL:** Fix OpenTofu crash (#5)
2. **HIGH:** Create missing 0400_Install-TestingTools.ps1 (#7)
3. **HIGH:** Install Pester and PSScriptAnalyzer (#1, #2)
4. **MEDIUM:** Fix module references in tests (#6)
5. **MEDIUM:** Fix Infrastructure test mocks (#8)
6. **MEDIUM:** Make environment validation more flexible (#3)
7. **LOW:** Fix log viewer exit codes (#4)