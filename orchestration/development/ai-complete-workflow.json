{
  "name": "ai-complete-workflow",
  "description": "Complete AI-enhanced workflow: branch, commit, push, and PR with intelligent descriptions",
  "version": "2.0.0",
  "author": "AitherZero Team",
  "tags": ["git", "ai", "automation", "complete", "pr"],
  "requirements": {
    "modules": ["GitAutomation", "PullRequestManager"],
    "tools": ["git", "gh"],
    "minimumVersion": "7.0"
  },
  "parameters": {
    "branchName": {
      "description": "Name for the feature branch",
      "required": true,
      "example": "fix-logging-and-ci"
    },
    "filePattern": {
      "description": "Files to stage (defaults to all modified)",
      "required": false,
      "default": ".",
      "example": "*.ps1 *.yml"
    },
    "commitMessage": {
      "description": "Commit message (will be AI-enhanced if simple)",
      "required": false,
      "default": "auto"
    },
    "prTitle": {
      "description": "PR title (auto-generated if not provided)",
      "required": false
    },
    "prDescription": {
      "description": "PR description (AI-generated if not provided)",
      "required": false
    },
    "baseBranch": {
      "description": "Base branch for PR",
      "required": false,
      "default": "main"
    },
    "autoMerge": {
      "description": "Enable auto-merge after checks",
      "required": false,
      "default": false
    }
  },
  "variables": {
    "branchName": "{{branchName}}",
    "filePattern": "{{filePattern:=.}}",
    "commitMessage": "{{commitMessage:=auto}}",
    "prTitle": "{{prTitle}}",
    "prDescription": "{{prDescription}}",
    "baseBranch": "{{baseBranch:=main}}",
    "autoMerge": "{{autoMerge:=false}}"
  },
  "stages": [
    {
      "name": "Create Feature Branch",
      "description": "Create and checkout the feature branch",
      "sequence": ["0701"],
      "variables": {
        "Type": "feature",
        "Name": "{{branchName}}",
        "Checkout": true,
        "Force": true,
        "NonInteractive": true
      },
      "parameters": {
        "Type": "feature",
        "Name": "{{branchName}}",
        "Checkout": true,
        "Force": true,
        "NonInteractive": true
      }
    },
    {
      "name": "Stage Files",
      "description": "Stage files for commit",
      "sequence": ["0704"],
      "variables": {
        "Patterns": "{{filePattern}}",
        "ShowStatus": true,
        "Force": true
      }
    },
    {
      "name": "Generate AI Commit Message",
      "description": "Generate intelligent commit message from changes",
      "sequence": ["0741"],
      "condition": "{{commitMessage == 'auto'}}",
      "variables": {
        "IncludeBody": true,
        "IncludeStats": true,
        "ApplyDirectly": true
      }
    },
    {
      "name": "Create Manual Commit",
      "description": "Create commit with provided message",
      "sequence": ["0702"],
      "condition": "{{commitMessage != 'auto'}}",
      "variables": {
        "Message": "{{commitMessage}}",
        "AutoStage": false,
        "NonInteractive": true,
        "Force": true
      }
    },
    {
      "name": "Push Branch",
      "description": "Push branch to remote",
      "sequence": ["0705"],
      "variables": {
        "SetUpstream": true,
        "Force": false,
        "NonInteractive": true
      }
    },
    {
      "name": "Create Pull Request",
      "description": "Create PR with AI-enhanced description",
      "sequence": ["0703"],
      "variables": {
        "Title": "{{prTitle}}",
        "Body": "{{prDescription}}",
        "Base": "{{baseBranch}}",
        "AutoMerge": "{{autoMerge}}",
        "NonInteractive": true,
        "Force": true,
        "RunChecks": true,
        "Labels": "automated,ai-enhanced"
      }
    }
  ],
  "hooks": {
    "pre": {
      "description": "Validate git status before starting",
      "command": "git status --porcelain",
      "validateOutput": true
    },
    "post": {
      "description": "Show final status",
      "command": "git log -1 --oneline && echo '' && gh pr status"
    }
  },
  "notifications": {
    "onSuccess": {
      "message": "✅ Complete workflow executed successfully! PR created and ready for review.",
      "level": "Information"
    },
    "onFailure": {
      "message": "❌ Workflow failed. Check logs for details.",
      "level": "Error"
    },
    "onStageComplete": {
      "message": "✓ {{stageName}} completed",
      "level": "Debug"
    }
  },
  "errorHandling": {
    "continueOnError": false,
    "rollbackOnFailure": false,
    "retryCount": 0
  }
}