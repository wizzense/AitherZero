{
  "metadata": {
    "name": "git-feature",
    "description": "Complete feature workflow: branch ‚Üí validate ‚Üí commit ‚Üí push ‚Üí PR with AI assistance",
    "version": "2.0.0",
    "category": "git",
    "author": "AitherZero Git Automation Team",
    "tags": ["git", "feature", "workflow", "ai", "pr", "automation"],
    "estimatedDuration": "5-10 minutes",
    "lastUpdated": "2025-11-02T06:00:00Z"
  },
  "requirements": {
    "minimumPowerShellVersion": "7.0",
    "requiredModules": ["GitAutomation", "PullRequestManager"],
    "requiredTools": ["git", "gh"],
    "platforms": ["Windows", "Linux", "macOS"],
    "permissions": ["git-write", "github-api"]
  },
  "orchestration": {
    "defaultVariables": {
      "branchType": "feature",
      "branchName": "",
      "commitType": "feat",
      "commitMessage": "auto",
      "prTitle": "auto",
      "prDescription": "auto",
      "baseBranch": "main",
      "autoValidate": true,
      "autoStage": true,
      "nonInteractive": false
    },
    "profiles": {
      "standard": {
        "description": "Standard feature workflow with validation",
        "variables": {
          "autoValidate": true,
          "autoStage": true
        }
      },
      "quick": {
        "description": "Skip validation for speed",
        "variables": {
          "autoValidate": false,
          "autoStage": true
        }
      },
      "interactive": {
        "description": "Interactive prompts for all steps",
        "variables": {
          "nonInteractive": false,
          "autoStage": false
        }
      }
    },
    "stages": [
      {
        "name": "Create Feature Branch",
        "description": "Create and checkout feature branch",
        "sequences": ["0701"],
        "variables": {
          "Type": "{{branchType}}",
          "Name": "{{branchName}}",
          "Force": false,
          "NonInteractive": "{{nonInteractive}}"
        },
        "continueOnError": false,
        "timeout": 60
      },
      {
        "name": "Validation",
        "description": "Quick validation before commit",
        "sequences": ["0410"],
        "condition": "{{autoValidate}}",
        "variables": {
          "Fast": true,
          "ExcludePaths": ["tests", "examples"],
          "FailOnWarning": false
        },
        "continueOnError": true,
        "timeout": 120
      },
      {
        "name": "Stage Files",
        "description": "Stage modified files for commit",
        "sequences": ["0704"],
        "condition": "{{autoStage}}",
        "variables": {
          "Pattern": ".",
          "Interactive": "!{{nonInteractive}}"
        },
        "continueOnError": false,
        "timeout": 60
      },
      {
        "name": "Create Commit",
        "description": "Create commit with AI-generated message",
        "sequences": ["0702"],
        "variables": {
          "Type": "{{commitType}}",
          "Message": "{{commitMessage}}",
          "NonInteractive": "{{nonInteractive}}",
          "UseAI": true
        },
        "continueOnError": false,
        "timeout": 120
      },
      {
        "name": "Push Branch",
        "description": "Push feature branch to remote",
        "sequences": ["0705"],
        "variables": {
          "Force": false,
          "SetUpstream": true
        },
        "continueOnError": false,
        "timeout": 180
      },
      {
        "name": "Create Pull Request",
        "description": "Create PR with AI-generated description",
        "sequences": ["0703"],
        "variables": {
          "Title": "{{prTitle}}",
          "Body": "{{prDescription}}",
          "Base": "{{baseBranch}}",
          "NonInteractive": "{{nonInteractive}}",
          "UseAI": true
        },
        "continueOnError": false,
        "timeout": 120
      }
    ]
  },
  "validation": {
    "preConditions": [
      {
        "name": "Git Available",
        "condition": "Get-Command git -ErrorAction SilentlyContinue",
        "message": "Git must be installed and available in PATH"
      },
      {
        "name": "GitHub CLI Available",
        "condition": "Get-Command gh -ErrorAction SilentlyContinue",
        "message": "GitHub CLI (gh) must be installed for PR creation"
      },
      {
        "name": "Branch Name Provided",
        "condition": "'{{branchName}}' -ne ''",
        "message": "Branch name is required"
      }
    ],
    "postConditions": [
      {
        "name": "PR Created",
        "condition": "$results.PRUrl -ne $null",
        "message": "Pull request should be created"
      }
    ]
  },
  "notifications": {
    "onStart": {
      "message": "üöÄ Starting feature workflow: {{branchName}}",
      "level": "Information",
      "channels": ["console"]
    },
    "onSuccess": {
      "message": "‚úÖ Feature workflow completed! PR: {{PRUrl}}",
      "level": "Success",
      "channels": ["console"],
      "includeMetrics": true
    },
    "onFailure": {
      "message": "‚ùå Feature workflow failed at stage: {{FailedStage}}",
      "level": "Error",
      "channels": ["console"],
      "includeFailures": true
    }
  },
  "reporting": {
    "enabled": true,
    "formats": ["Console", "JSON"],
    "outputPath": "./reports/git",
    "includeMetrics": true,
    "includeLogs": false
  },
  "postActions": [
    {
      "description": "Display PR information",
      "type": "script",
      "inline": "if ($results.PRUrl) { Write-Host \"\\nüîó Pull Request: $($results.PRUrl)\" -ForegroundColor Green; Write-Host \"üìù Branch: $($results.BranchName)\" -ForegroundColor Cyan }"
    },
    {
      "description": "Next steps guidance",
      "type": "script",
      "inline": "Write-Host \"\\nüí° Next Steps:\" -ForegroundColor Yellow; Write-Host \"  - Review PR and address any CI/CD check failures\"; Write-Host \"  - Request reviews from team members\"; Write-Host \"  - Monitor PR for feedback and approvals\""
    }
  ],
  "integrations": {
    "github": {
      "enabled": true,
      "autoLabels": true,
      "autoAssign": true
    }
  }
}
