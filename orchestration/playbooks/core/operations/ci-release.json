{
  "metadata": {
    "name": "ci-release",
    "description": "Release automation - mirrors GitHub Actions release-automation.yml",
    "version": "2.0.0",
    "category": "operations",
    "author": "AitherZero CI/CD Team",
    "tags": ["ci", "release", "automation", "github-actions", "deployment"],
    "estimatedDuration": "15-25 minutes",
    "lastUpdated": "2025-11-02T06:30:00Z",
    "githubWorkflow": "release-automation.yml"
  },
  "requirements": {
    "minimumPowerShellVersion": "7.0",
    "requiredModules": ["Pester", "PSScriptAnalyzer"],
    "requiredTools": ["git", "gh"],
    "platforms": ["Windows", "Linux", "macOS"],
    "permissions": ["git-write", "github-api"]
  },
  "orchestration": {
    "defaultVariables": {
      "version": "",
      "prerelease": false,
      "runFullTests": true,
      "generateChangelog": true,
      "publishDocs": true
    },
    "profiles": {
      "prerelease": {
        "description": "Pre-release version",
        "variables": {
          "prerelease": true,
          "runFullTests": false
        }
      },
      "production": {
        "description": "Production release",
        "variables": {
          "prerelease": false,
          "runFullTests": true,
          "generateChangelog": true,
          "publishDocs": true
        }
      }
    },
    "stages": [
      {
        "name": "Pre-Release Validation",
        "description": "Comprehensive validation before release",
        "sequences": ["0407", "0404", "0402"],
        "condition": "{{runFullTests}}",
        "variables": {
          "CheckSyntax": true,
          "FailOnWarning": true,
          "NoCoverage": false
        },
        "continueOnError": false,
        "timeout": 900
      },
      {
        "name": "Version Update",
        "description": "Update version in manifest files",
        "sequences": [],
        "preScript": "Write-Host 'üìù Updating version to {{version}}...' -ForegroundColor Cyan; if ('{{version}}' -eq '') { throw 'Version is required' }; # Update VERSION file and manifests here",
        "continueOnError": false,
        "timeout": 60
      },
      {
        "name": "Generate Changelog",
        "description": "Generate changelog from commits",
        "sequences": ["0798"],
        "condition": "{{generateChangelog}}",
        "continueOnError": true,
        "timeout": 120
      },
      {
        "name": "Build Documentation",
        "description": "Generate release documentation",
        "sequences": ["0744", "0745"],
        "condition": "{{publishDocs}}",
        "continueOnError": true,
        "timeout": 300
      },
      {
        "name": "Create Release Tag",
        "description": "Create and push release tag",
        "sequences": [],
        "postScript": "Write-Host 'üè∑Ô∏è  Creating release tag v{{version}}...' -ForegroundColor Cyan; git tag -a \"v{{version}}\" -m \"Release v{{version}}\"; git push origin \"v{{version}}\"",
        "continueOnError": false,
        "timeout": 120
      }
    ]
  },
  "validation": {
    "preConditions": [
      {
        "name": "Version Provided",
        "condition": "'{{version}}' -ne ''",
        "message": "Version number is required for release"
      },
      {
        "name": "Git Clean",
        "condition": "(git status --porcelain).Length -eq 0",
        "message": "Git working directory must be clean"
      },
      {
        "name": "On Main Branch",
        "condition": "(git branch --show-current) -eq 'main'",
        "message": "Releases must be created from main branch"
      }
    ],
    "postConditions": [
      {
        "name": "Tag Created",
        "condition": "git tag -l 'v{{version}}'",
        "message": "Release tag should be created"
      }
    ]
  },
  "notifications": {
    "onStart": {
      "message": "üöÄ Starting release automation for version {{version}}...",
      "level": "Information"
    },
    "onSuccess": {
      "message": "‚úÖ Release v{{version}} created successfully!",
      "level": "Success"
    },
    "onFailure": {
      "message": "‚ùå Release automation failed",
      "level": "Error"
    }
  },
  "integrations": {
    "github": {
      "enabled": true,
      "workflow": "release-automation.yml"
    }
  }
}
