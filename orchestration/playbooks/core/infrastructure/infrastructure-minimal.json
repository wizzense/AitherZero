{
  "metadata": {
    "name": "infrastructure-minimal",
    "description": "Minimal system configuration without virtualization - cross-platform compatible",
    "version": "2.0.0",
    "category": "infrastructure",
    "author": "AitherZero Infrastructure Team",
    "tags": ["infrastructure", "system", "minimal", "configuration", "cross-platform"],
    "estimatedDuration": "5-10 minutes",
    "lastUpdated": "2025-11-02T06:00:00Z"
  },
  "requirements": {
    "minimumPowerShellVersion": "7.0",
    "requiredModules": [],
    "requiredTools": [],
    "platforms": ["Windows", "Linux", "macOS"],
    "permissions": ["admin-recommended"]
  },
  "orchestration": {
    "defaultVariables": {
      "skipWindowsFeatures": false,
      "configurePowerShell": true,
      "setupDirectories": true,
      "syncConfig": true
    },
    "profiles": {
      "minimal": {
        "description": "Bare minimum configuration",
        "variables": {
          "skipWindowsFeatures": true,
          "configurePowerShell": true
        }
      },
      "standard": {
        "description": "Standard system configuration",
        "variables": {
          "skipWindowsFeatures": false,
          "configurePowerShell": true
        }
      }
    },
    "stages": [
      {
        "name": "Setup Directories",
        "description": "Create required directory structure",
        "sequences": ["0002"],
        "condition": "{{setupDirectories}}",
        "variables": {
          "Profile": "Standard"
        },
        "continueOnError": false,
        "timeout": 60
      },
      {
        "name": "System Configuration",
        "description": "Configure system settings and features",
        "sequences": ["0100"],
        "condition": "!{{skipWindowsFeatures}}",
        "variables": {
          "SkipOptional": true,
          "QuickSetup": true
        },
        "continueOnError": true,
        "timeout": 300
      },
      {
        "name": "Sync Configuration",
        "description": "Synchronize configuration manifest",
        "sequences": ["0003"],
        "condition": "{{syncConfig}}",
        "continueOnError": false,
        "timeout": 60
      },
      {
        "name": "Environment Validation",
        "description": "Validate system configuration",
        "sequences": ["0500"],
        "variables": {
          "CheckDirectories": true,
          "CheckPowerShell": true
        },
        "continueOnError": false,
        "timeout": 60
      }
    ]
  },
  "validation": {
    "preConditions": [],
    "postConditions": [
      {
        "name": "Directories Created",
        "condition": "Test-Path './logs' -and Test-Path './reports'",
        "message": "Required directories should exist"
      }
    ]
  },
  "notifications": {
    "onStart": {
      "message": "‚öôÔ∏è  Configuring minimal infrastructure...",
      "level": "Information",
      "channels": ["console", "log"]
    },
    "onSuccess": {
      "message": "‚úÖ Minimal infrastructure configured successfully!",
      "level": "Success",
      "channels": ["console", "log"]
    },
    "onFailure": {
      "message": "‚ùå Infrastructure configuration failed",
      "level": "Error",
      "channels": ["console", "log"],
      "includeFailures": true
    }
  },
  "reporting": {
    "enabled": true,
    "formats": ["Console", "JSON"],
    "outputPath": "./reports/infrastructure",
    "includeMetrics": true,
    "includeLogs": true
  },
  "postActions": [
    {
      "description": "Display configuration summary",
      "type": "script",
      "inline": "Write-Host '\\nüìä System Configuration Summary:' -ForegroundColor Cyan; Write-Host \"  Platform: $($PSVersionTable.Platform)\"; Write-Host \"  PowerShell: $($PSVersionTable.PSVersion)\"; Write-Host \"  OS: $($PSVersionTable.OS)\""
    },
    {
      "description": "Next steps",
      "type": "script",
      "inline": "Write-Host '\\nüí° Next Steps:' -ForegroundColor Yellow; Write-Host '  - Run devtools-minimal to install development tools'; Write-Host '  - For virtualization: Use hyperv-lab-setup (Windows) or infrastructure-wsl'; Write-Host '  - For full setup: Use minimal-setup or dev-environment playbooks'"
    }
  ]
}
