{
  "Name": "claude-commit-workflow", 
  "Description": "AI-assisted commit workflow with validation and automation",
  "Version": "1.0",
  "Created": "2025-01-08T00:00:00Z",
  "Tags": ["claude-code", "git", "commit", "validation", "ai-assisted"],
  "Triggers": {
    "claude_hooks": ["pre-tool-use", "post-tool-use"],
    "git_events": ["pre_commit", "commit_msg"],
    "manual": true
  },
  "Stages": [
    {
      "Name": "Pre-Commit Validation",
      "Description": "Validate changes before committing",
      "Sequence": ["0407", "0404"],
      "ContinueOnError": false,
      "Variables": {
        "OnlyModified": true,
        "QuickScan": true,
        "FailOnErrors": true
      },
      "SuccessCriteria": {
        "MaxSyntaxErrors": 0,
        "MaxCriticalIssues": 0
      }
    },
    {
      "Name": "Security Pre-Check",
      "Description": "Quick security scan of modified files",
      "Sequence": ["0523"],
      "Variables": {
        "QuickScan": true,
        "OnlyModified": true,
        "CheckSecrets": true,
        "CheckHardcodedCredentials": true
      },
      "SuccessCriteria": {
        "MaxCriticalSecurityIssues": 0
      }
    },
    {
      "Name": "Test Impact Analysis",
      "Description": "Run tests affected by changes",
      "Sequence": ["0402"],
      "Conditional": "$(TestsAvailable) -eq $true -and $(RunTests) -eq $true",
      "Variables": {
        "OnlyAffectedTests": true,
        "FastExecution": true,
        "CoverageCheck": false
      }
    },
    {
      "Name": "Commit Creation",
      "Description": "Create conventional commit with AI assistance",
      "Sequence": ["0702"],
      "Variables": {
        "ConventionalFormat": true,
        "AutoStage": true,
        "AIAssisted": true,
        "IncludeIssueRef": true
      }
    },
    {
      "Name": "Post-Commit Actions", 
      "Description": "Trigger follow-up actions after successful commit",
      "Sequence": [],
      "CustomActions": [
        {
          "Type": "trigger_ci",
          "Conditional": "$(TriggerCI) -eq $true"
        },
        {
          "Type": "update_branch_protection",
          "Conditional": "$(Branch) -eq 'main'"
        },
        {
          "Type": "notify_team",
          "Conditional": "$(NotifyOnCommit) -eq $true"
        }
      ]
    }
  ],
  "PreExecution": {
    "CheckGitStatus": true,
    "ValidateWorkingDirectory": true,
    "CheckBranchProtection": true,
    "AIContextAnalysis": {
      "AnalyzeChanges": true,
      "SuggestCommitMessage": true,
      "IdentifyRisks": true,
      "RecommendTests": true
    }
  },
  "PostExecution": {
    "Notifications": [
      {
        "Type": "console",
        "Message": "Commit created successfully: $(CommitHash)",
        "Conditional": "$(CommitSuccess) -eq $true"
      },
      {
        "Type": "console",
        "Message": "Consider running 'az 0703' to create a pull request",
        "Level": "Info",
        "Conditional": "$(Branch) -ne 'main' -and $(Branch) -ne 'develop'"
      }
    ],
    "TriggerScripts": ["0511"],
    "UpdateMetrics": {
      "CommitFrequency": true,
      "CodeQualityTrend": true,
      "TestCoverageImpact": true
    },
    "AILearning": {
      "RecordPatterns": true,
      "UpdateRecommendations": true,
      "LearnFromFeedback": true
    }
  },
  "AIAssistance": {
    "CommitMessageGeneration": {
      "AnalyzeChanges": true,
      "SuggestType": true,
      "SuggestScope": true,
      "GenerateDescription": true,
      "IncludeBreakingChanges": true
    },
    "RiskAssessment": {
      "AnalyzeImpact": true,
      "IdentifyDependencies": true,
      "SuggestTesting": true,
      "RecommendReviewers": true
    },
    "QualityGuidance": {
      "BestPractices": true,
      "CodingStandards": true,
      "SecurityConsiderations": true,
      "PerformanceImpact": true
    }
  },
  "Variables": {
    "ConventionalCommit": true,
    "RunTests": true,
    "TriggerCI": false,
    "NotifyOnCommit": false,
    "RequireCleanWorkingTree": true,
    "AllowEmptyCommit": false,
    "SignCommits": false,
    "PushAfterCommit": false
  },
  "Profile": "Standard",
  "Prerequisites": {
    "GitRepository": true,
    "CleanWorkingTree": false,
    "BranchUpToDate": false,
    "PowerShellVersion": "7.0+"
  },
  "CommitMessageTemplates": {
    "feat": "feat({scope}): {description}\n\n{body}\n\n{footer}",
    "fix": "fix({scope}): {description}\n\n{body}\n\nFixes #{issue}",
    "docs": "docs({scope}): {description}\n\n{body}",
    "style": "style({scope}): {description}\n\n{body}",
    "refactor": "refactor({scope}): {description}\n\n{body}",
    "test": "test({scope}): {description}\n\n{body}",
    "chore": "chore({scope}): {description}\n\n{body}"
  },
  "OnError": {
    "RollbackChanges": false,
    "ResetToHead": false,
    "CreateBackup": true,
    "NotifyUser": true,
    "LogLevel": "Detailed",
    "SuggestFixes": true
  },
  "Integrations": {
    "GitHub": {
      "CheckBranchProtection": true,
      "TriggerActions": true,
      "UpdatePRs": true
    },
    "Jira": {
      "LinkIssues": true,
      "UpdateStatus": false,
      "CreateTransition": false
    },
    "Slack": {
      "NotifyChannel": "#commits",
      "Conditional": "$(ImportantCommit) -eq $true"
    }
  },
  "Hooks": {
    "PreCommit": {
      "RunLinting": true,
      "CheckSecrets": true,
      "ValidateSyntax": true,
      "RunQuickTests": true
    },
    "CommitMsg": {
      "ValidateFormat": true,
      "CheckLength": true,
      "RequireIssueRef": false,
      "AIEnhancement": true
    },
    "PostCommit": {
      "TriggerCI": "$(TriggerCI)",
      "UpdateMetrics": true,
      "NotifyTeam": "$(NotifyOnCommit)"
    }
  }
}