{
  "$schema": "../../../schema/playbook-schema-v3.json",
  "metadata": {
    "name": "custom-playbook-template",
    "description": "Template for creating custom extensible automation playbooks",
    "version": "1.0.0",
    "category": "operations",
    "author": "AitherZero User",
    "tags": ["template", "custom", "extensible"],
    "estimatedDuration": "5-30 minutes",
    "lastUpdated": "2025-11-04T00:00:00Z"
  },
  "requirements": {
    "minimumPowerShellVersion": "7.0",
    "requiredModules": [],
    "requiredTools": [],
    "platforms": ["Windows", "Linux", "macOS"],
    "permissions": []
  },
  "orchestration": {
    "defaultVariables": {
      "environment": "Development",
      "dryRun": false,
      "parallel": true,
      "continueOnError": false
    },
    "profiles": {
      "minimal": {
        "description": "Minimal execution - core blocks only",
        "variables": {
          "installOptional": false,
          "runTests": false
        }
      },
      "standard": {
        "description": "Standard execution with validation",
        "variables": {
          "installOptional": true,
          "runTests": true
        }
      },
      "complete": {
        "description": "Complete execution with all features",
        "variables": {
          "installOptional": true,
          "runTests": true,
          "generateReports": true
        }
      }
    },
    "stages": [
      {
        "name": "Stage 1: Environment Preparation",
        "description": "Prepare the environment before running automation",
        "sequences": [
          "0001",
          "0002"
        ],
        "continueOnError": false,
        "timeout": 300,
        "variables": {},
        "condition": ""
      },
      {
        "name": "Stage 2: Core Installation",
        "description": "Install core required components",
        "sequences": [
          "0207"
        ],
        "continueOnError": false,
        "timeout": 600,
        "variables": {},
        "condition": ""
      },
      {
        "name": "Stage 3: Optional Components",
        "description": "Install optional components based on configuration",
        "sequences": [
          "0201",
          "0206"
        ],
        "continueOnError": true,
        "timeout": 600,
        "parallel": true,
        "maxConcurrency": 2,
        "condition": "{{installOptional:=true}}"
      },
      {
        "name": "Stage 4: Validation",
        "description": "Run tests and validation checks",
        "sequences": [
          "0407",
          "0402"
        ],
        "continueOnError": false,
        "timeout": 900,
        "condition": "{{runTests:=false}}"
      },
      {
        "name": "Stage 5: Reporting",
        "description": "Generate reports and metrics",
        "sequences": [
          "0510"
        ],
        "continueOnError": true,
        "timeout": 300,
        "condition": "{{generateReports:=false}}"
      }
    ]
  },
  "validation": {
    "preConditions": [
      {
        "name": "PowerShell Version Check",
        "condition": "$PSVersionTable.PSVersion.Major -ge 7",
        "message": "PowerShell 7.0 or higher is required"
      }
    ],
    "postConditions": [
      {
        "name": "Execution Success Check",
        "condition": "$results.Failed -eq 0",
        "message": "All stages should complete successfully"
      }
    ]
  },
  "notifications": {
    "onStart": {
      "message": "üöÄ Starting custom automation playbook...",
      "level": "Information",
      "channels": ["console"]
    },
    "onProgress": {
      "message": "‚ö° Stage {{stageName}} completed",
      "level": "Information",
      "channels": ["console"]
    },
    "onSuccess": {
      "message": "‚úÖ Custom automation completed successfully!",
      "level": "Success",
      "channels": ["console"],
      "includeMetrics": true
    },
    "onFailure": {
      "message": "‚ùå Custom automation failed - check logs for details",
      "level": "Error",
      "channels": ["console"],
      "includeFailures": true
    }
  },
  "reporting": {
    "enabled": true,
    "formats": ["Console", "JSON"],
    "outputPath": "./reports/custom",
    "includeMetrics": true,
    "includeLogs": true
  },
  "postActions": [
    {
      "description": "Display execution summary",
      "type": "script",
      "inline": "Write-Host '\\n=== Execution Summary ===' -ForegroundColor Cyan; if (Test-Path './reports/custom/*.json') { Get-ChildItem './reports/custom' -Filter '*.json' | Select-Object -Last 1 | Get-Content | ConvertFrom-Json | Format-List }"
    }
  ],
  "optimizations": {
    "enabled": true,
    "strategies": ["parallel-execution", "caching", "minimal-logging"]
  },
  "_comments": {
    "usage": [
      "This is a template for creating custom playbooks.",
      "",
      "CUSTOMIZATION INSTRUCTIONS:",
      "1. Copy this file to orchestration/playbooks/custom/your-playbook-name.json",
      "2. Update the metadata section with your information",
      "3. Modify the stages array to include your desired automation blocks",
      "4. Configure profiles for different execution modes",
      "5. Set up conditions and variables as needed",
      "",
      "EXECUTION:",
      "./Start-AitherZero.ps1 -Mode Orchestrate -Playbook your-playbook-name",
      "./Start-AitherZero.ps1 -Mode Orchestrate -Playbook your-playbook-name -Profile minimal",
      "./Start-AitherZero.ps1 -Mode Orchestrate -Playbook your-playbook-name -DryRun",
      "",
      "AVAILABLE BUILDING BLOCKS:",
      "- 0000-0099: Environment preparation",
      "- 0100-0199: Infrastructure setup",
      "- 0200-0299: Development tools (includes Git workflow automation)",
      "- 0400-0499: Testing and validation",
      "- 0500-0599: Reporting and metrics",
      "- 0700-0799: Advanced development (AI, runners, MCP servers)",
      "- 9000-9999: Maintenance",
      "",
      "See docs/BUILDING-BLOCKS.md for complete reference"
    ]
  }
}
