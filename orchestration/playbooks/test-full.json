{
  "name": "test-full",
  "description": "Complete test suite including unit, integration, analysis, and coverage",
  "version": "1.0.0",
  "author": "AitherZero Testing Framework",
  "tags": ["testing", "full", "comprehensive", "quality"],
  "requirements": {
    "modules": ["Pester", "PSScriptAnalyzer"],
    "minimumVersion": "7.0",
    "estimatedDuration": "30-45 minutes"
  },
  "variables": {
    "testPath": "./tests",
    "outputPath": "./tests/results",
    "minimumCoverage": 80,
    "failFast": false,
    "generateReports": true
  },
  "stages": [
    {
      "name": "Environment Setup",
      "description": "Ensure all testing tools are installed",
      "sequence": ["0400"],
      "continueOnError": false
    },
    {
      "name": "Unit Tests",
      "description": "Execute all unit tests with coverage",
      "sequence": ["0402"],
      "variables": {
        "NoCoverage": false
      },
      "continueOnError": true
    },
    {
      "name": "Integration Tests",
      "description": "Execute integration and E2E tests",
      "sequence": ["0403"],
      "variables": {
        "IncludeE2E": true
      },
      "continueOnError": true
    },
    {
      "name": "Code Analysis",
      "description": "Complete PSScriptAnalyzer analysis",
      "sequence": ["0404"],
      "variables": {
        "IncludeSuppressed": true,
        "ExcludePaths": ["legacy-to-migrate"]
      },
      "continueOnError": true
    },
    {
      "name": "AST Validation",
      "description": "Full AST validation including all checks",
      "sequence": ["0405"],
      "variables": {
        "CheckSyntax": true,
        "CheckParameters": true,
        "CheckCommands": true,
        "CheckModuleDependencies": true
      },
      "continueOnError": true
    },
    {
      "name": "Coverage Report",
      "description": "Generate comprehensive coverage reports",
      "sequence": ["0406"],
      "variables": {
        "Format": "All",
        "RunTests": false
      },
      "continueOnError": false
    }
  ],
  "parallelization": {
    "enabled": false,
    "maxConcurrency": 1,
    "strategy": "sequential"
  },
  "reporting": {
    "enabled": true,
    "formats": ["HTML", "JSON", "JUnit"],
    "aggregateResults": true,
    "publishPath": "./tests/reports"
  },
  "notifications": {
    "onSuccess": {
      "message": "✅ Full test suite completed successfully!",
      "level": "Information",
      "includeMetrics": true
    },
    "onFailure": {
      "message": "❌ Test suite completed with failures",
      "level": "Warning",
      "includeFailures": true
    },
    "onCoverageFailure": {
      "message": "⚠️ Code coverage below threshold",
      "level": "Warning",
      "threshold": 80
    }
  },
  "postActions": [
    {
      "description": "Generate consolidated report",
      "type": "module",
      "command": "New-TestReport",
      "parameters": {
        "IncludeTests": true,
        "IncludeAnalysis": true,
        "IncludeCoverage": true,
        "Format": "HTML"
      }
    },
    {
      "description": "Display test metrics",
      "type": "script",
      "inline": "@('\nTest Suite Metrics:', '==================') | Write-Host -ForegroundColor Cyan; Get-ChildItem './tests/results' -Filter '*Summary*.json' | ForEach-Object { $data = Get-Content $_.FullName | ConvertFrom-Json; Write-Host \"`n$($_.Name -replace '-Summary.*', ''):\"; $data | Format-List }"
    },
    {
      "description": "Open coverage report",
      "type": "conditional",
      "condition": "$env:AITHERZERO_OPEN_REPORTS -eq 'true'",
      "action": {
        "type": "script",
        "inline": "Start-Process (Join-Path './tests/coverage' 'coverage-report.html')"
      }
    }
  ]
}