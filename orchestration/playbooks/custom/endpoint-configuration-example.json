{
  "$schema": "../../schema/playbook-schema-v3.json",
  "metadata": {
    "name": "endpoint-configuration-example",
    "description": "Example: Configurable endpoint setup demonstrating building-block patterns",
    "version": "1.0.0",
    "category": "operations",
    "author": "AitherZero Team",
    "tags": ["example", "endpoint", "configuration", "extensible"],
    "estimatedDuration": "15-30 minutes",
    "lastUpdated": "2025-11-04T00:00:00Z"
  },
  "requirements": {
    "minimumPowerShellVersion": "7.0",
    "requiredModules": [],
    "requiredTools": [],
    "platforms": ["Windows", "Linux", "macOS"],
    "permissions": []
  },
  "orchestration": {
    "defaultVariables": {
      "environment": "Development",
      "projectType": "Web",
      "includeAI": false,
      "includeTesting": true,
      "includeDocker": true,
      "generateReports": true
    },
    "profiles": {
      "minimal": {
        "description": "Minimal setup - just Git and basic tools",
        "variables": {
          "projectType": "Generic",
          "includeAI": false,
          "includeTesting": false,
          "includeDocker": false,
          "generateReports": false
        }
      },
      "web-development": {
        "description": "Web development with Node.js, Docker, and testing",
        "variables": {
          "projectType": "Web",
          "includeAI": false,
          "includeTesting": true,
          "includeDocker": true,
          "generateReports": true
        }
      },
      "python-datascience": {
        "description": "Python data science environment",
        "variables": {
          "projectType": "Python",
          "includeAI": false,
          "includeTesting": true,
          "includeDocker": false,
          "generateReports": true
        }
      },
      "ai-powered-development": {
        "description": "Complete AI-powered development environment",
        "variables": {
          "projectType": "Web",
          "includeAI": true,
          "includeTesting": true,
          "includeDocker": true,
          "generateReports": true
        }
      },
      "cloud-devops": {
        "description": "Cloud DevOps with Azure, AWS, and infrastructure tools",
        "variables": {
          "projectType": "Cloud",
          "includeAI": false,
          "includeTesting": true,
          "includeDocker": true,
          "generateReports": true
        }
      }
    },
    "stages": [
      {
        "name": "Environment Foundation",
        "description": "Essential environment preparation - always runs",
        "sequences": ["0001", "0002"],
        "continueOnError": false,
        "timeout": 300
      },
      {
        "name": "Core Development Tools",
        "description": "Install Git - required for all development",
        "sequences": ["0207"],
        "continueOnError": false,
        "timeout": 300
      },
      {
        "name": "Web Development Tools",
        "description": "Install Node.js for web development",
        "sequences": ["0201"],
        "condition": "{{projectType}} -eq 'Web'",
        "continueOnError": false,
        "timeout": 600
      },
      {
        "name": "Python Development Tools",
        "description": "Install Python and Poetry for Python development",
        "sequences": ["0206", "0204"],
        "condition": "{{projectType}} -eq 'Python'",
        "parallel": true,
        "maxConcurrency": 2,
        "continueOnError": false,
        "timeout": 600
      },
      {
        "name": "Cloud Development Tools",
        "description": "Install cloud CLIs and infrastructure tools",
        "sequences": ["0212", "0213", "0008", "0009"],
        "condition": "{{projectType}} -eq 'Cloud'",
        "parallel": true,
        "maxConcurrency": 2,
        "continueOnError": true,
        "timeout": 900
      },
      {
        "name": "Container Platform",
        "description": "Install Docker for containerization",
        "sequences": ["0208"],
        "condition": "{{includeDocker}}",
        "continueOnError": true,
        "timeout": 1200
      },
      {
        "name": "Development IDE",
        "description": "Install VS Code",
        "sequences": ["0210"],
        "continueOnError": true,
        "timeout": 600
      },
      {
        "name": "Testing Infrastructure",
        "description": "Set up testing tools and run initial validation",
        "sequences": ["0400", "0407"],
        "condition": "{{includeTesting}}",
        "continueOnError": false,
        "timeout": 300
      },
      {
        "name": "AI Development Setup",
        "description": "Configure AI-powered development tools",
        "sequences": ["0010", "0730", "0740", "0743"],
        "condition": "{{includeAI}}",
        "parallel": false,
        "continueOnError": true,
        "timeout": 900
      },
      {
        "name": "Final Validation",
        "description": "Run tests to ensure everything works",
        "sequences": ["0402"],
        "condition": "{{includeTesting}}",
        "continueOnError": true,
        "timeout": 900,
        "variables": {
          "NoCoverage": true,
          "FastMode": true
        }
      },
      {
        "name": "Generate Reports",
        "description": "Create project status report",
        "sequences": ["0510"],
        "condition": "{{generateReports}}",
        "continueOnError": true,
        "timeout": 300
      }
    ]
  },
  "validation": {
    "preConditions": [
      {
        "name": "PowerShell Version Check",
        "condition": "$PSVersionTable.PSVersion.Major -ge 7",
        "message": "PowerShell 7.0 or higher is required"
      }
    ],
    "postConditions": [
      {
        "name": "Core Tools Installed",
        "condition": "$results.Completed -contains '0207'",
        "message": "Git must be installed successfully"
      }
    ]
  },
  "notifications": {
    "onStart": {
      "message": "üöÄ Starting endpoint configuration...",
      "level": "Information",
      "channels": ["console"]
    },
    "onSuccess": {
      "message": "‚úÖ Endpoint configuration completed successfully!",
      "level": "Success",
      "channels": ["console"],
      "includeMetrics": true
    },
    "onFailure": {
      "message": "‚ùå Endpoint configuration failed",
      "level": "Error",
      "channels": ["console"],
      "includeFailures": true
    }
  },
  "reporting": {
    "enabled": true,
    "formats": ["Console", "JSON"],
    "outputPath": "./reports/endpoint-setup",
    "includeMetrics": true,
    "includeLogs": true
  },
  "optimizations": {
    "enabled": true,
    "strategies": ["parallel-execution", "caching", "minimal-logging"]
  }
}
