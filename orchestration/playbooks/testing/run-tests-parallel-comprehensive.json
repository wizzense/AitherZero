{
  "metadata": {
    "name": "run-tests-parallel-comprehensive",
    "description": "High-performance parallel test execution with multi-threading and concurrent jobs",
    "version": "2.0.0",
    "category": "testing",
    "tags": ["testing", "parallel", "performance", "concurrent", "multi-threaded"],
    "estimatedDuration": "3-5 minutes (vs 15-20 minutes sequential)",
    "githubWorkflow": "parallel-testing.yml",
    "performance": {
      "parallelism": "Up to 8 concurrent test jobs",
      "speedup": "3-4x faster than sequential execution",
      "maxConcurrency": 8,
      "resourceOptimized": true
    }
  },
  
  "requirements": {
    "minimumPowerShellVersion": "7.0",
    "requiredModules": ["Pester", "PSScriptAnalyzer"],
    "requiredTools": [],
    "platforms": ["Windows", "Linux", "macOS"],
    "concurrent": true,
    "threadSafe": true
  },
  
  "orchestration": {
    "executionMode": "parallel",
    "maxConcurrency": 8,
    "failFast": false,
    "consolidateResults": true,
    
    "defaultVariables": {
      "resultsPath": "./tests/results",
      "reportsPath": "./reports",
      "parallelism": 8,
      "threadSafe": true,
      "consolidate": true
    },
    
    "profiles": {
      "quick": {
        "description": "Quick parallel execution - unit tests only (2-3 min)",
        "variables": {
          "testSuites": ["unit"],
          "maxConcurrency": 8
        },
        "excludeStages": ["Integration Tests", "Domain Tests", "Security Scan"]
      },
      "standard": {
        "description": "Standard parallel - unit + domain tests (3-4 min)",
        "variables": {
          "testSuites": ["unit", "domain"],
          "maxConcurrency": 8
        },
        "excludeStages": ["Integration Tests", "Security Scan"]
      },
      "comprehensive": {
        "description": "Full parallel - all tests with maximum concurrency (5-7 min)",
        "variables": {
          "testSuites": ["unit", "domain", "integration"],
          "maxConcurrency": 8
        },
        "excludeStages": []
      },
      "ci": {
        "description": "CI optimized - parallel with result consolidation (4-5 min)",
        "variables": {
          "testSuites": ["unit", "domain", "integration"],
          "maxConcurrency": 8,
          "consolidate": true,
          "uploadArtifacts": true
        },
        "excludeStages": ["Security Scan"]
      }
    },
    
    "stages": [
      {
        "name": "Install Testing Tools",
        "description": "Install Pester and PSScriptAnalyzer",
        "sequences": ["0400"],
        "continueOnError": false,
        "timeout": 300,
        "parallel": false
      },
      {
        "name": "Unit Tests - Parallel Execution",
        "description": "Run unit tests in parallel by script range",
        "type": "parallel-group",
        "parallel": true,
        "maxConcurrency": 8,
        "failFast": false,
        "continueOnError": true,
        "timeout": 600,
        "jobs": [
          {
            "name": "Unit Tests [0000-0099]",
            "sequence": ["0402"],
            "variables": {
              "TestPath": "./tests/unit/automation-scripts/0000-0099",
              "OutputFile": "UnitTests-0000-0099.xml"
            }
          },
          {
            "name": "Unit Tests [0100-0199]",
            "sequence": ["0402"],
            "variables": {
              "TestPath": "./tests/unit/automation-scripts/0100-0199",
              "OutputFile": "UnitTests-0100-0199.xml"
            }
          },
          {
            "name": "Unit Tests [0200-0299]",
            "sequence": ["0402"],
            "variables": {
              "TestPath": "./tests/unit/automation-scripts/0200-0299",
              "OutputFile": "UnitTests-0200-0299.xml"
            }
          },
          {
            "name": "Unit Tests [0400-0499]",
            "sequence": ["0402"],
            "variables": {
              "TestPath": "./tests/unit/automation-scripts/0400-0499",
              "OutputFile": "UnitTests-0400-0499.xml"
            }
          },
          {
            "name": "Unit Tests [0500-0599]",
            "sequence": ["0402"],
            "variables": {
              "TestPath": "./tests/unit/automation-scripts/0500-0599",
              "OutputFile": "UnitTests-0500-0599.xml"
            }
          },
          {
            "name": "Unit Tests [0700-0799]",
            "sequence": ["0402"],
            "variables": {
              "TestPath": "./tests/unit/automation-scripts/0700-0799",
              "OutputFile": "UnitTests-0700-0799.xml"
            }
          },
          {
            "name": "Unit Tests [0800-0899]",
            "sequence": ["0402"],
            "variables": {
              "TestPath": "./tests/unit/automation-scripts/0800-0899",
              "OutputFile": "UnitTests-0800-0899.xml"
            }
          },
          {
            "name": "Unit Tests [0900-0999]",
            "sequence": ["0402"],
            "variables": {
              "TestPath": "./tests/unit/automation-scripts/0900-0999",
              "OutputFile": "UnitTests-0900-0999.xml"
            }
          }
        ]
      },
      {
        "name": "Domain Tests - Parallel Execution",
        "description": "Run domain module tests in parallel",
        "type": "parallel-group",
        "parallel": true,
        "maxConcurrency": 6,
        "failFast": false,
        "continueOnError": true,
        "timeout": 600,
        "jobs": [
          {
            "name": "Domain Tests [configuration]",
            "sequence": ["0402"],
            "variables": {
              "TestPath": "./tests/domains/configuration",
              "OutputFile": "DomainTests-configuration.xml"
            }
          },
          {
            "name": "Domain Tests [documentation]",
            "sequence": ["0402"],
            "variables": {
              "TestPath": "./tests/domains/documentation",
              "OutputFile": "DomainTests-documentation.xml"
            }
          },
          {
            "name": "Domain Tests [infrastructure]",
            "sequence": ["0402"],
            "variables": {
              "TestPath": "./tests/domains/infrastructure",
              "OutputFile": "DomainTests-infrastructure.xml"
            }
          },
          {
            "name": "Domain Tests [security]",
            "sequence": ["0402"],
            "variables": {
              "TestPath": "./tests/domains/security",
              "OutputFile": "DomainTests-security.xml"
            }
          },
          {
            "name": "Domain Tests [testing]",
            "sequence": ["0402"],
            "variables": {
              "TestPath": "./tests/domains/testing",
              "OutputFile": "DomainTests-testing.xml"
            }
          },
          {
            "name": "Domain Tests [utilities]",
            "sequence": ["0402"],
            "variables": {
              "TestPath": "./tests/domains/utilities",
              "OutputFile": "DomainTests-utilities.xml"
            }
          }
        ]
      },
      {
        "name": "Integration Tests - Parallel Execution",
        "description": "Run integration test suites in parallel",
        "type": "parallel-group",
        "parallel": true,
        "maxConcurrency": 1,
        "failFast": false,
        "continueOnError": true,
        "timeout": 900,
        "jobs": [
          {
            "name": "Integration Tests [automation-scripts]",
            "sequence": ["0403"],
            "variables": {
              "TestPath": "./tests/integration/automation-scripts",
              "OutputFile": "IntegrationTests-automation-scripts.xml"
            }
          }
        ]
      },
      {
        "name": "Static Analysis - Parallel",
        "description": "Run static analysis checks in parallel with tests",
        "type": "parallel-group",
        "parallel": true,
        "maxConcurrency": 2,
        "failFast": false,
        "continueOnError": true,
        "timeout": 300,
        "jobs": [
          {
            "name": "Syntax Validation",
            "sequence": ["0407"],
            "variables": {
              "All": true
            }
          },
          {
            "name": "PSScriptAnalyzer",
            "sequence": ["0404"],
            "variables": {}
          }
        ]
      }
    ],
    
    "consolidation": {
      "enabled": true,
      "description": "Consolidate results from all parallel test jobs",
      "stages": [
        {
          "name": "Consolidate Test Results",
          "description": "Merge all test result XML files",
          "type": "consolidation",
          "script": "0408",
          "parameters": {
            "SourcePath": "{{resultsPath}}",
            "ConsolidatedOutput": "{{resultsPath}}/Consolidated-TestResults.xml"
          }
        },
        {
          "name": "Generate Unified Report",
          "description": "Create comprehensive report from consolidated results",
          "script": "0510",
          "parameters": {
            "Format": "All",
            "ShowAll": true
          }
        }
      ]
    }
  },
  
  "postActions": [
    {
      "description": "Generate comprehensive dashboard from parallel results",
      "type": "script",
      "command": "0512",
      "parameters": {
        "Format": "All",
        "Open": false,
        "ParallelResults": true
      },
      "continueOnError": true
    },
    {
      "description": "Display parallel execution summary",
      "type": "script",
      "inline": "Write-Host \"`n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\" -ForegroundColor Cyan; Write-Host \"‚ö° Parallel test execution complete!\" -ForegroundColor Green; Write-Host \"üìä 3-4x faster than sequential execution\" -ForegroundColor Cyan; Write-Host \"üìÅ Check reports/ for consolidated results\" -ForegroundColor Cyan; Write-Host \"‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê`n\" -ForegroundColor Cyan"
    }
  ],
  
  "notifications": {
    "onSuccess": {
      "message": "‚ö° All parallel tests completed successfully - 3-4x faster!",
      "level": "Information"
    },
    "onFailure": {
      "message": "‚ùå Some parallel test jobs failed - review consolidated dashboard",
      "level": "Warning"
    }
  },
  
  "integrations": {
    "github": {
      "enabled": true,
      "uploadArtifacts": true,
      "artifacts": [
        "{{resultsPath}}/**/*.xml",
        "{{reportsPath}}/**/*.html",
        "{{reportsPath}}/**/*.json"
      ],
      "consolidateMatrix": true
    }
  },
  
  "performance": {
    "notes": [
      "Executes up to 8 test jobs concurrently",
      "Unit tests split by script number ranges (0000-0099, 0100-0199, etc.)",
      "Domain tests split by module (configuration, infrastructure, etc.)",
      "Integration tests split by test suite",
      "Static analysis runs in parallel with tests",
      "Results automatically consolidated and reported",
      "Typical speedup: 3-4x faster than sequential execution",
      "Maximum concurrency: 8 jobs (configurable)",
      "Thread-safe test execution",
      "Fail-fast disabled to get complete results"
    ]
  }
}
