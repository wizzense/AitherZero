{
  "$schema": "https://json-schema.org/draft-07/schema#",
  "title": "AitherZero Ring Deployment Configuration",
  "description": "Configuration for ring-based deployment strategy",
  "version": "1.0.0",
  
  "rings": {
    "ring-0": {
      "level": 0,
      "name": "Ring 0 - Early Development",
      "description": "Earliest testing phase for new features and experimental changes",
      "type": "development",
      "testProfile": "quick",
      "testTimeout": 5,
      "requiredApprovals": 0,
      "autoMerge": false,
      "deploymentGates": {
        "syntaxValidation": true,
        "unitTests": true,
        "integrationTests": false,
        "securityScan": false,
        "performanceTest": false,
        "manualApproval": false
      },
      "nextRing": "ring-0-integrations",
      "color": "#0E8A16"
    },
    
    "ring-0-integrations": {
      "level": 0.5,
      "name": "Ring 0 - Integrations",
      "description": "Integration testing for Ring 0 features before promotion",
      "type": "integration",
      "testProfile": "integration",
      "testTimeout": 10,
      "requiredApprovals": 0,
      "autoMerge": false,
      "deploymentGates": {
        "syntaxValidation": true,
        "unitTests": true,
        "integrationTests": true,
        "securityScan": true,
        "performanceTest": false,
        "manualApproval": false
      },
      "nextRing": "ring-1",
      "previousRing": "ring-0",
      "color": "#1D76DB"
    },
    
    "ring-1": {
      "level": 1,
      "name": "Ring 1 - Validation",
      "description": "Secondary validation ring for stable feature development",
      "type": "development",
      "testProfile": "standard",
      "testTimeout": 15,
      "requiredApprovals": 1,
      "autoMerge": false,
      "deploymentGates": {
        "syntaxValidation": true,
        "unitTests": true,
        "integrationTests": true,
        "securityScan": true,
        "performanceTest": false,
        "manualApproval": false
      },
      "nextRing": "ring-1-integrations",
      "previousRing": "ring-0-integrations",
      "color": "#0E8A16"
    },
    
    "ring-1-integrations": {
      "level": 1.5,
      "name": "Ring 1 - Integrations",
      "description": "Full integration testing before pre-production",
      "type": "integration",
      "testProfile": "integration",
      "testTimeout": 20,
      "requiredApprovals": 1,
      "autoMerge": false,
      "deploymentGates": {
        "syntaxValidation": true,
        "unitTests": true,
        "integrationTests": true,
        "securityScan": true,
        "performanceTest": true,
        "manualApproval": false
      },
      "nextRing": "ring-2",
      "previousRing": "ring-1",
      "color": "#1D76DB"
    },
    
    "ring-2": {
      "level": 2,
      "name": "Ring 2 - Pre-Production",
      "description": "Pre-production testing with comprehensive validation",
      "type": "pre-production",
      "testProfile": "comprehensive",
      "testTimeout": 30,
      "requiredApprovals": 1,
      "autoMerge": false,
      "deploymentGates": {
        "syntaxValidation": true,
        "unitTests": true,
        "integrationTests": true,
        "securityScan": true,
        "performanceTest": true,
        "manualApproval": true
      },
      "nextRing": "dev",
      "previousRing": "ring-1-integrations",
      "color": "#FBCA04"
    },
    
    "dev": {
      "level": 4,
      "name": "Development Environment (Ring 4)",
      "description": "Full development environment with complete test suite",
      "type": "environment",
      "testProfile": "full",
      "testTimeout": 35,
      "requiredApprovals": 1,
      "autoMerge": false,
      "deploymentGates": {
        "syntaxValidation": true,
        "unitTests": true,
        "integrationTests": true,
        "securityScan": true,
        "performanceTest": true,
        "manualApproval": true
      },
      "nextRing": "main",
      "previousRing": "ring-2",
      "protected": true,
      "color": "#D93F0B"
    },
    
    "main": {
      "level": 5,
      "name": "Production (Ring 5)",
      "description": "Production environment - highest stability requirements",
      "type": "production",
      "testProfile": "production",
      "testTimeout": 45,
      "requiredApprovals": 2,
      "autoMerge": false,
      "deploymentGates": {
        "syntaxValidation": true,
        "unitTests": true,
        "integrationTests": true,
        "securityScan": true,
        "performanceTest": true,
        "manualApproval": true
      },
      "previousRing": "dev",
      "protected": true,
      "color": "#B60205"
    }
  },
  
  "testProfiles": {
    "quick": {
      "name": "Quick Validation",
      "description": "Fast syntax and basic unit tests",
      "estimatedDuration": "2-3 minutes",
      "tests": [
        "syntax-validation",
        "basic-unit-tests"
      ],
      "parallel": true,
      "failFast": true
    },
    
    "integration": {
      "name": "Integration Testing",
      "description": "Integration tests with external dependencies",
      "estimatedDuration": "5-15 minutes",
      "tests": [
        "syntax-validation",
        "unit-tests",
        "integration-tests",
        "security-scan-basic"
      ],
      "parallel": true,
      "failFast": false
    },
    
    "standard": {
      "name": "Standard Test Suite",
      "description": "Standard test suite for feature validation",
      "estimatedDuration": "5-10 minutes",
      "tests": [
        "syntax-validation",
        "unit-tests",
        "integration-tests-basic",
        "psscriptanalyzer"
      ],
      "parallel": true,
      "failFast": false
    },
    
    "comprehensive": {
      "name": "Comprehensive Testing",
      "description": "Comprehensive test suite with performance tests",
      "estimatedDuration": "15-20 minutes",
      "tests": [
        "syntax-validation",
        "unit-tests",
        "integration-tests",
        "security-scan",
        "performance-tests",
        "psscriptanalyzer"
      ],
      "parallel": true,
      "failFast": false
    },
    
    "full": {
      "name": "Full Test Suite",
      "description": "Complete test suite for environment deployment",
      "estimatedDuration": "20-30 minutes",
      "tests": [
        "syntax-validation",
        "unit-tests",
        "integration-tests",
        "security-scan",
        "performance-tests",
        "load-tests",
        "psscriptanalyzer",
        "code-coverage"
      ],
      "parallel": true,
      "failFast": false
    },
    
    "production": {
      "name": "Production Validation",
      "description": "Production-grade validation with all gates",
      "estimatedDuration": "30-45 minutes",
      "tests": [
        "syntax-validation",
        "unit-tests",
        "integration-tests",
        "security-scan-comprehensive",
        "performance-tests",
        "load-tests",
        "stress-tests",
        "psscriptanalyzer",
        "code-coverage",
        "compliance-check"
      ],
      "parallel": false,
      "failFast": false
    }
  },
  
  "promotionRules": {
    "automaticPromotion": {
      "enabled": false,
      "conditions": {
        "allTestsPassed": true,
        "approvalCount": 1,
        "noOpenIssues": false,
        "codeReviewPassed": true,
        "waitingPeriod": "24h"
      }
    },
    
    "manualPromotion": {
      "enabled": true,
      "requiresLabel": "ready-for-promotion",
      "allowedUsers": ["maintainers", "admins"]
    },
    
    "emergencyPromotion": {
      "enabled": true,
      "requiresLabel": "emergency-promotion",
      "skipTests": false,
      "requiresApproval": true,
      "allowedUsers": ["admins"]
    }
  },
  
  "branchProtection": {
    "ring-0": {
      "requiredStatusChecks": ["syntax-validation", "unit-tests"],
      "requireApprovals": 0,
      "dismissStaleReviews": false,
      "requireCodeOwnerReviews": false,
      "restrictPushes": false
    },
    
    "ring-0-integrations": {
      "requiredStatusChecks": ["syntax-validation", "unit-tests", "integration-tests"],
      "requireApprovals": 0,
      "dismissStaleReviews": false,
      "requireCodeOwnerReviews": false,
      "restrictPushes": false
    },
    
    "ring-1": {
      "requiredStatusChecks": ["syntax-validation", "unit-tests", "integration-tests", "security-scan"],
      "requireApprovals": 1,
      "dismissStaleReviews": true,
      "requireCodeOwnerReviews": false,
      "restrictPushes": false
    },
    
    "ring-1-integrations": {
      "requiredStatusChecks": ["syntax-validation", "unit-tests", "integration-tests", "security-scan", "performance-tests"],
      "requireApprovals": 1,
      "dismissStaleReviews": true,
      "requireCodeOwnerReviews": false,
      "restrictPushes": false
    },
    
    "ring-2": {
      "requiredStatusChecks": ["syntax-validation", "unit-tests", "integration-tests", "security-scan", "performance-tests"],
      "requireApprovals": 1,
      "dismissStaleReviews": true,
      "requireCodeOwnerReviews": true,
      "restrictPushes": true,
      "allowedPushers": ["maintainers", "admins"]
    },
    
    "dev": {
      "requiredStatusChecks": ["syntax-validation", "unit-tests", "integration-tests", "security-scan", "performance-tests", "code-coverage"],
      "requireApprovals": 1,
      "dismissStaleReviews": true,
      "requireCodeOwnerReviews": true,
      "restrictPushes": true,
      "allowedPushers": ["admins"],
      "protected": true
    },
    
    "main": {
      "requiredStatusChecks": ["syntax-validation", "unit-tests", "integration-tests", "security-scan", "performance-tests", "code-coverage", "compliance-check"],
      "requireApprovals": 2,
      "dismissStaleReviews": true,
      "requireCodeOwnerReviews": true,
      "restrictPushes": true,
      "allowedPushers": ["admins"],
      "requireSignedCommits": true,
      "protected": true
    }
  },
  
  "notifications": {
    "slack": {
      "enabled": false,
      "webhookUrl": "${SLACK_WEBHOOK_URL}",
      "channels": {
        "promotions": "#deployments",
        "failures": "#alerts",
        "production": "#production"
      }
    },
    
    "email": {
      "enabled": false,
      "recipients": {
        "promotions": ["team@example.com"],
        "failures": ["oncall@example.com"],
        "production": ["admins@example.com"]
      }
    },
    
    "github": {
      "enabled": true,
      "prComments": true,
      "issueCreation": true,
      "statusChecks": true
    }
  },
  
  "metrics": {
    "tracking": {
      "promotionDuration": true,
      "testDuration": true,
      "failureRate": true,
      "timeInRing": true
    },
    
    "dashboard": {
      "enabled": true,
      "updateFrequency": "hourly",
      "retentionDays": 90
    }
  }
}
